.... ,0
こんにちは ,0
れんだれーちゃん(仮)です ,0
さいきんいそがしいです ,0
3Dのゲームとかアニメとかがはやってるものだから... ,0
わたしとGPUくんは大忙しです ,0
私たちがどんなふうに3Dモデルを描いてるか知ってますか？ ,0
.... ,0
しりませんよね... ,1
まあいいです ,0
今日は皆さんに3Dモデルがどのように色づけられているか知ってもらいます ,0
そうですね... ,0
とりあえず適当なモデルを表示してみましょうか ,0
えい ,0 ,1
これが何のモデルかわかりますか？ ,0
.... ,1
答えは球体です ,0
え？ ,0
円にしか見えないですか? ,0
誤解です ,0
これは一切の影がついていない球です ,0
想像してみてください ,0
もし影の全くつかない物体があったとしたら、どのように見えるでしょうか ,0
.... ,1
影がつかなければその断面が現れます ,0
影絵を想像すると分かりやすいと思います ,0
球はどの方向から見ても断面が円になります ,0
ですから今ここに映っている影のない球は円に見えるわけです ,0
ただ... ,0
球を見せたいのに円が表示されてしまっては困ります... ,1
影を付けてみましょう ,0
えい ,0 ,1
球に見えるようなりました ,0
簡単にやりましたが、どうやって影を付けたか気になりませんか？ ,0
気になりますよね ,0
説明しましょう ,0
影を付けるためには光が必要です ,0
皆さんからは見えませんが、上空に1つのライトが設置してあります ,0
ライトは矢印の方向に光を発しています ,0 ,1
この矢印と逆方向のベクトルを光ベクトルとします ,0
影を付けるためには球の情報も必要です ,0
3Dモデルは法線ベクトルという情報を持っています ,0
これは面がどの方向を向いているのかを表すベクトルです ,0
例えばこの球でいうと... ,0
こんなかんじです ,0 ,1
実際にはもっと多くの法線ベクトルを持っていますが表示の都合上少なくしています ,0
2つのベクトルが真反対であれば面は光に対して垂直であるといえます ,0
この面と光の角度を求めるために内積を使います ,0
内積は、言い換えれば2つのベクトルの一致度です ,0
内積で面がどのくらい光の方向を向いているかがわかるのです ,0
各頂点でこの法線ベクトルと光のベクトルの内積を計算します ,0
ベクトルの長さを事前に処理することで内積の値は-1から1になります ,0
マイナスの値は使いづらいのでこの値にも処理を加え0から1にします ,0
この処理した内積の値を色と掛け合わせることで影が描けるのです ,0
驚いたことにこれらはすべて高校数学の内容で説明できます ,0
すごいでしょう ,2
このように3Dモデルの色を決定する機能をshaderといいます ,0
shaderを書き換えてこの影をいじってみましょう ,0 ,1
最近アニメ調のCGがはやりですよね ,0
